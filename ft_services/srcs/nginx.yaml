apiVersion: v1
kind: Service
metadata:
	name: nginx-service
spec:
	selector: nginx
	type: LoadBalancer
	ports:
	- port: 80
		name: nginx-http
		targetPort: 80
		nodePort: 80
	- port: 443
		name: nginx-https
		targetPort: 443
		nodePort: 443
	- port: 22
		name: nginx-ssh
		targetPort: 22
		nodePort: 22

---

apiVersion: apps/v1
kind: Deployment
metadata:
	name: nginx-deployment
spec:
	selector:
		matchLabels:
			app: nginx
	replicas: 1
	template:
		metadata:
			name: nginx-pod
			labels:
				app: nginx
		spec:
			containers:
			- name: nginx-container
				image: nginx_image
				imagePullPolicy: Never
				ports:
					- containerPort: 80
						name: nginx-http
					- containerPort: 443
						name: nginx-https
					- containerPort: 22
						name: nginx-ssh
					livenessProbe:
						tcpSocket:
							port: 22
						initialDelaySeconds: 15
						periodSeconds: 10